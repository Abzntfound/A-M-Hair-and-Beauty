<!DOCTYPE html>
<html>
    <head>
        <title>A&M Hair and Beauty - Basket</title>
        <link rel="icon" href="favicon.ico">
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="glass.css">
        <link rel="stylesheet" href="products.css">
        <link rel="stylesheet" href="animations.css">
        <link rel="stylesheet" href="basket.css">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div id="header" class="glass">
            <div class="left" onclick="document.location='index.html'">
                <h1>A&M Hair and Beauty</h1>
            </div>
            <div class="right" onclick="document.location='#Basket'">
                <img src="basket.png" alt="Basket">
                <span>Basket</span>
            </div>
        </div>

        <div id="basket">
           <div id="basket-items"></div>
        </div>

        <div id="empty-basket"></div>

        <!-- Suggested Products Section -->
        <h2>You Might Also Like</h2>
        <div id="products">
            <div class="product1">
                <img src="oils1.jpg" alt="Hair Serum">
                <h3>Hair Serum</h3>
                <p>£15.99</p>
                <button class="button" onclick="addToBasket('Hair Serum', 15.99, 'oils1.jpg')">Add to Basket</button>
            </div>
            <div class="product2">
                <img src="oils2.jpg" alt="Satin Bonnet">
                <h3>Satin Bonnet</h3>
                <p>£3.99</p>
                <button class="button" onclick="addToBasket('Satin Bonnet', 3.99, 'oils2.jpg')">Add to Basket</button>
            </div>
            <div class="product3">
                <img src="oils3.jpg" alt="Hair Oil">
                <h3>Hair Oil</h3>
                <p>£12.99</p>
                <button class="button" onclick="addToBasket('Hair Oil', 12.99, 'oils3.jpg')">Add to Basket</button>
            </div>
        </div>

        <script>

        function proceedToCheckout() {
            document.location = 'checkout.html';
        }

            function addToBasket(name, price, image) {
                let basket = JSON.parse(localStorage.getItem('basket')) || [];
                basket.push({name, price, image});
                localStorage.setItem('basket', JSON.stringify(basket));
            }

function loadBasket() {
  const basket = JSON.parse(localStorage.getItem('basket')) || [];
  const basketContainer = document.getElementById('basket-items');

  if (basket.length === 0) {
    basketContainer.innerHTML = `
      <div id="empty-basket">
        <img src="basket.png" alt="empty basket logo">
        <h2>Your basket is empty.</h2>
        <p>Whatever you add to your basket will show up here.</p>
        <p>Explore the store to add things to your basket.</p>
      </div>`;
  } else {
    basketContainer.innerHTML = basket.map((item, index) => `
      <div class="basket-item glass">
        <img src="${item.image}" alt="${item.name}">
        <div class="basket-info">
          <h3>${item.name}</h3>
          <p>£${item.price.toFixed(2)} each</p>
          <label>Quantity:</label>
          <select id="quantity${index}" onchange="updateQuantity(${index})">
            <!-- Dropdown options -->
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
          <p>Total: £${(item.price * item.quantity).toFixed(2)}</p>
        </div>
        <div id="checkout">
          <button id="checkout-button" class="basket-button" onclick="proceedToCheckout()">Proceed to Checkout</button>
        </div>
        <button class="remove-btn" onclick="removeFromBasket(${index})">Remove</button>
      </div>
    `).join('');
  }
}

// Update the quantity of an item when the dropdown changes
function updateQuantity(index) {
  let basket = JSON.parse(localStorage.getItem('basket')) || [];
  const newQuantity = parseInt(document.getElementById(`quantity${index}`).value);

  if (isNaN(newQuantity) || newQuantity <= 0) {
    alert("Please select a valid quantity.");
    return;
  }

  basket[index].quantity = newQuantity;
  localStorage.setItem('basket', JSON.stringify(basket));
  loadBasket(); // Refresh the basket view
}

function removeFromBasket(index) {
  let basket = JSON.parse(localStorage.getItem('basket')) || [];
  basket.splice(index, 1); // Remove the selected item
  localStorage.setItem('basket', JSON.stringify(basket));
  loadBasket(); // Refresh the basket view
}

// Load basket on page load
loadBasket();
        </script>
    </body>
</html>
